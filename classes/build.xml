<project name="TP-SAP" basedir="." default="compile">


    <!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx       -->
    <!--path to javacc.jar                                    -->
    <property name="javacchome"
	      value="/usr/share/java/"
    />

    <!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx       -->
    <property name="src.dir"     value="."/>

    <property name="build.dir"   value="classes"/>

    <property name="example.dir" value="examples"/>

    <property name="doc.dir"     value="doc"/>

    <property name="main.class"  value="Lg"/>

    <property name="grammar.file" value="Lg.jj"/>

    <!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx       -->
    <target name="clean-grammar" description="Delete the files generated by javacc">
      <delete file="LgConstants.java"/> 
      <delete file="Lg.java"/> 
      <delete file="LgTokenManager.java"/> 
      <delete file="ParseException.java"/> 
      <delete file="SimpleCharStream.java"/> 
      <delete file="Token.java"/> 
      <delete file="TokenMgrError.java"/> 
    </target>

    <target name="clean" depends="clean-grammar" description="Delete all generated files">
      <delete dir="${doc.dir}"/>
      <delete dir="${build.dir}"/>
    </target>

    <target name="grammar" 
	    description="Generate the classes for parsing from the grammar">
      <javacc
	  target="${grammar.file}"
	  outputdirectory="."
	  javacchome="${javacchome}"
	  />
    </target>

    <target name="compile" depends="grammar" description="Compile all">
        <mkdir dir="${build.dir}"/>
        <javac srcdir="${src.dir}" destdir="${build.dir}"  debug="true" debuglevel="lines,vars,source"
	       includeantruntime="false"/>
    </target>

    <target name="clean-build" depends="clean,compile"/>

    <target name="doc" depends="compile">
        <javadoc destdir="${doc.dir}" 
		 windowtitle="TP SAP"
		 access="private">
	  <fileset dir="${src.dir}"> </fileset>
	</javadoc>
    </target>

    <!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx       -->
    <!-- use: ant -Darg=ex0 run                               -->

    <target name="run" depends="compile">
        <java classname="${main.class}" classpath="${build.dir}">
	      <arg value="examples/${arg}.ff"/>
	</java>
    </target>

    <target name="run-ex1" depends="compile">
        <java classname="${main.class}" classpath="${build.dir}">
	      <arg value="examples/ex1.ff"/>
	</java>
    </target>


</project>
